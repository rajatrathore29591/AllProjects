<style>
    input[type="file"] {
        display: block;
    }

    .imageThumb {
        max-height: 100px;
        border: 1px solid #ccc;
        margin: 10px 10px 0 10px;
        padding: 1px;
        width: 400px;
    }
</style>

<div class="page-content-wrapper">
    <div class="page-content" style="min-height: 720px">
        <div class="row">

            <div class="col-md-12">
                <div class="portlet box green clearfix">
                    <div class="portlet-title">
                        <div class="caption bold pull-left">
                            <span>Reward for Premium Member</span>
                        </div>

                    </div>
                    <div class="portlet-body form ">
                            <div class="row">
                            <div class="p-20">
                            <div class="col-sm-6">
                        <form  class="form-horizontal " ng-submit="submit()">
                                <div class="form-group">
                                    <label for="special" class="col-sm-4 control-label">Special Event</label>
                                    <div class="col-sm-8">
                                              <div class="checkbox">
                                                  <input type="checkbox" class="formcheckbox" ng-model="PremReward.isSpecial">
                                              </div>
                                    </div>
                                </div>
                             <!--   <div class="form-group">
                                    <label for="coupon" class="col-sm-4 control-label">Coupon Code</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" id ng-model="randomCode" placeholder="Coupon code" maxlength="6" readonly required>
                                    </div>
                                </div>-->
                                <div class="form-group">
                                    <label for="endate" class="col-sm-4 control-label">Set End Date</label>
                                    <div class="col-sm-8">
                                       <input type="hidden" ng-model="PremReward.rewardId" />
                                        <div class="input-group">
                                            <input type="text" class="form-control ng-pristine ng-valid datepicker" name="DatePic" id="endate" placeholder="End Date" value="{{NewDate | date: 'yyyy-MM-dd hh:ii:ss'}}" required readonly>
                                           <!-- <div class="input-group-addon"> <i class="glyphicon glyphicon-remove clear1"></i><i class="glyphicon glyphicon-calendar"></i></div>-->
                                            <span class="input-group-addon">
                                                                <span class="glyphicon glyphicon-remove clear1"></span>
                                                                <span class="glyphicon glyphicon-calendar "></span>
                                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="expiry" class="col-sm-4 control-label">Expiry Time(hours)</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control"  pattern="\d+"  oninvalid="InvalidMsg(this);" placeholder="Time (Hours)" maxlength="2" ng-model="PremReward.expiryHours" id="expiry" required>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="recurring" class="col-sm-4 control-label">Recurring Time(days)</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control"  pattern="\d+"  oninvalid="InvalidMsg(this);" placeholder="No of days" maxlength="3" ng-model="PremReward.nextAvailability" id="recurring" required>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="point" class="col-sm-4 control-label">Point</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" pattern="\d+"  oninvalid="InvalidMsg(this);" placeholder="No of Points" maxlength="5" ng-model="PremReward.point" id="point" required>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="user" class="col-sm-4 control-label">Total No. of Platinum user</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control w80perc" pattern="\d+"  oninvalid="InvalidMsg(this);" placeholder="No of User" maxlength="3" ng-model="num" id="user"><label class="lh34px">Out Of {{PremReward1.count}}</label>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="user" class="col-sm-4 control-label">Select Random</label>
                                    <div class="col-sm-8">
                                        <input type="button" ng-click="random()" class="btn btn-danger" value="Select">
                                    </div>
                                </div>
                                  <div class="form-group">
                                     <label for="user" class="col-sm-4 control-label">Notification</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" ng-model="notification" placeholder="Notification Message" maxlength="150" id="Text1" required>
                                    </div>
                                    
                                </div>
                             <div class="form-group">
                                     <label for="user" class="col-sm-4 control-label">Web Link</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" ng-model="PremReward.link" placeholder="Web_Link"   required>
                                    </div>
                                    
                                </div>
                                <div class="form-group">
                                    <label for="user" class="col-sm-4 control-label">Upload Banner</label>
                                    <div class="col-sm-8">
                                        <input type="file" name="fileInput" id="file1" onchange="angular.element(this).scope().fileChanged(event)" / >
                                    </div>
                                </div>
                                <div class="form-group" id="rewardImages">
                                    <label for="user" class="col-sm-4 control-label">Selected Banner</label>
                                    <div class="col-sm-8">
                                        <div class=" fileUpload">
                                        <div class="" id="output">
                                                    <p id="filename"></p>
                                                    <div class="img-thumbnail">
                                                        <img ng-src="{{path}}{{image}}" src="{{result}}" class="img-responsive imgthumb" />
                                                    </div>
                                        </div>
                                            </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-8 col-sm-offset-4">
                                        <div class="">
                                            <button type="submit"   class="btn  blue text-right">{{Text}}</button>
                                            <!--<button type="button" ng-click="Update()" ng-hide="showTable" id="Button1" class="btn  blue text-right">Update & Send</button>-->
                                        </div>
                                    </div>
                                </div>
                        </form>
                            </div>
                            <div class="col-sm-6">
                         <div class=" table-responsive">
                                          <div style="width:20% !important; float:right "> 
                                   <input type="text" ng-model="search" class="form-control" placeholder="Search"/ ></div>
                                        <table class="table table-striped table-bordered table-advance table-hover">
                                            <thead>
                                                <tr class="bold">
                                                     <th class="bold">Name
                                                    </th>
                                                    <th class="bold">Email
                                                    </th>
                                                </tr>
                                            </thead>

                                            <tbody>
                                                <tr dir-paginate="item in user|orderBy:sortKey:reverse|filter:search|itemsPerPage:5">
                                                    <td>{{item.firstName}}</td>
                                                    <td>{{item.email}}</td>
                                                    
                                                </tr>
                                            </tbody>
                                        </table>
                                        <dir-pagination-controls
                                            max-size="5"
                                            direction-links="true"
                                            boundary-links="true">
                                       </dir-pagination-controls>
                                    </div>
                            </div>
                            </div>
                            </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- END PAGE CONTENT-->
    </div>
    <div id="loader" ng-show="isbusy">
        <div class="page-spinner-bar" ng-spinner-bar="">
            <div class="bounce1"></div>
            <div class="bounce2"></div>
            <div class="bounce3"></div>
        </div>

    </div>
    <div id="static" class="modal fade" tabindex="-1" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title">Message</h4>
                </div>
                <div class="modal-body">
                    <p>
                       <!-- Would you like to continue with some arbitrary task?-->
                        {{Message}}
                    </p>
                </div>
                <div class="modal-footer">

                    <button type="button" ng-click="redirect()" data-dismiss="modal" class="btn green">Ok</button>
                </div>
            </div>
        </div>
    </div>

    <div id="cropm" class="modal fade" tabindex="-1" data-backdrop="static" data-keyboard="false" >
    <div class="modal-dialog modallarge" >
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                <h4 class="modal-title">Image Cropper</h4>
            </div>
            <div class="modal-body">

                <div>
                    <image-crop
                        data-height="350"
                        data-width="900"
                        data-shape="square"
                        data-step="imageCropStep"
                        src="imgSrc"
                        data-result="result"
                        data-result-blob="resultBlob"
                        crop="initCrop"
                        padding="250"
                        max-size="1024"></image-crop>
                </div>

                <div class="center-block cropbtns">
                    <br />
                    <button type="button" ng-click="clear()">Cancel</button>
                    <button type="button" ng-click="initCrop = true;" id="croop">Crop</button>
                </div>


                <div class="hide">

                    <h2>Result</h2>

                    <p>The data-result-blob property is a Blob object, which is necessary in some upload libraries like <a href="https://github.com/nervgh/angular-file-upload" target="_blank">Angular File Upload</a></p>
                    <p>Image using the data uri:</p>
                    <img id="cropimage" ng-src="{{result}}"></img>
                    <p>The Base64 String used in the image above:</p>
                    <textarea class="result-datauri">{{ result }}</textarea>
                    <button type="button" ng-click="clear()">Clear</button>

                </div>

            </div>
            <div class="modal-footer">

                <!--                <button type="button" ng-click="redirect()" data-dismiss="modal" class="btn green">Ok</button>-->
            </div>
        </div>
    </div>
</div>

<!--    <div id="cropm" class="modal fade" tabindex="-1" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                <h4 class="modal-title">Message</h4>
            </div>
            <div class="modal-body">

                <div>
                    <image-crop
                        data-height="150"
                        data-width="300"
                        data-shape="square"
                        data-step="imageCropStep"
                        src="imgSrc"
                        data-result="result"
                        data-result-blob="resultBlob"
                        crop="initCrop"
                        padding="250"
                        max-size="1024"></image-crop>
                </div>

                <div class="center-block cropbtns">
                    <br />
                    <button type="button" ng-click="clear()">Cancel</button>
                    <button type="button" ng-click="initCrop = true;" id="croop">Crop</button>
                </div>


                <div class="hide">

                    <h2>Result</h2>

                    <p>The data-result-blob property is a Blob object, which is necessary in some upload libraries like <a href="https://github.com/nervgh/angular-file-upload" target="_blank">Angular File Upload</a></p>
                    <p>Image using the data uri:</p>
                    <img id="cropimage" ng-src="{{result}}"></img>
                    <p>The Base64 String used in the image above:</p>
                    <textarea class="result-datauri">{{ result }}</textarea>
                    <button type="button" ng-click="clear()">Clear</button>

                </div>

            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>-->

      <script type="text/javascript">
          $(document).ready(function () {


              if (window.File && window.FileList && window.FileReader) {

                  $("#files").on("change", function (e) {
                      $('.imgthumb').remove();
                      var files = e.target.files,
                      filesLength = files.length;
                      var f = files[0]
                      var fileReader = new FileReader();
                      fileReader.onload = (function (e) {
                          var file = e.target;
                          $("<img></img>", {
                              class: "imgthumb",
                              src: e.target.result,
                              title: file.name
                          }).appendTo("#output");
                          $('.imgthumb').attr({ width: 100, height: 100 });

                      });
                      fileReader.readAsDataURL(f);

                  });
              } else { alert("Your browser doesn't support to File API") }
          });


</script>
    <script>

        $('#croop').click(function () {
            $('#cropm').modal('hide');
        })
    </script>

  <script>
      function InvalidMsg(textbox) {
          var t = Number(textbox.value);
          //if (textbox.value == '') {
          //    textbox.setCustomValidity('required field');
          //}
           if (t < 0) {
              return false;
              textbox.setCustomValidity('please enter only positive numbers');

          }
          //else {
          //    textbox.setCustomValidity('');
          //}
          return true;
      }

</script>


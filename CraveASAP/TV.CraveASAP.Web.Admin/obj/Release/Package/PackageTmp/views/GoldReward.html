<style>
    input[type="file"] {
        display: block;
    }

    .imageThumb {
        max-height: 100px;
        border: 1px solid #ccc;
        margin: 10px 10px 0 10px;
        padding: 1px;
        width: 400px;
    }
</style>

<div class="page-content-wrapper">
    <div class="page-content" style="min-height: 720px">
        <div class="row">

            <div class="col-xs-12">
                <div class="portlet box green clearfix">
                    <div class="portlet-title">
                        <div class="caption bold pull-left">
                            <span>Reward for Gold Member</span>
                        </div>
                    </div>
                    <div class="portlet-body form ">
                        <form class="form-horizontal " ng-submit="save()">
                            <div class="form-body">
                                <div class="form-group">
                                    <label class=" col-sm-2 control-label">Special Event</label>
                                    <div class="col-sm-6 col-md-4">
                                        <input type="checkbox" ng-checked="goldReward.isSpecial" class="formcheckbox" ng-model="goldReward.isSpecial" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class=" col-sm-2 control-label">Coupon code</label>
                                    <div class="col-sm-6 col-sm-4">
                                        <input type="text" class="form-control" placeholder="Coupon code"  ng-model="randomCode" readonly required>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class=" col-sm-2 control-label">Reward Name</label>
                                    <div class="col-sm-6 col-sm-4">
                                        <input type="text" class="form-control" placeholder="Reward Name" maxlength="30" ng-model="goldReward.rewardName" required>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class=" col-sm-2 control-label">Set End date</label>
                                    <div class="col-sm-6 col-md-4">
                                        <div class="input-group">
                                            <input type="text" name="DatePic" id="endDate" class="form-control pull-right ng-pristine ng-valid datepicker" value="{{NewDate | date: 'yyyy-MM-dd hh:ii:ss'}}" readonly required>
                                            <!--<div class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></div>-->
                                            <span class="input-group-addon">
                                                <span class="glyphicon glyphicon-remove clear1"></span>
                                                <span class="glyphicon glyphicon-calendar "></span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class=" col-sm-2 control-label">Expiry Time</label>
                                    <div class="col-sm-6 col-md-4">
                                        <input type="text" pattern="\d+" oninvalid="InvalidMsg(this);" class="form-control" placeholder="Time (Hours)" maxlength="2" ng-model="goldReward.expiryHours" required>
                                    </div>
                                </div>
                                  <div class="form-group">
                                    <label class=" col-sm-2 control-label">Points</label>
                                    <div class="col-sm-6 col-md-4">
                                        <input type="text" pattern="\d+" oninvalid="InvalidMsg(this);" class="form-control" placeholder="Points" maxlength="5" ng-model="goldReward.point" required>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class=" col-sm-2 control-label">Recurring</label>
                                    <div class="col-sm-6 col-md-4">
                                        <input type="text" pattern="\d+" oninvalid="InvalidMsg(this);" class="form-control" placeholder="No of days" maxlength="3" ng-model="goldReward.nextAvailability" required>
                                        <!--<input type="text" data-role="date">-->
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class=" col-sm-2 control-label">Description English</label>
                                    <div class="col-sm-6 col-md-4">
                                        <textarea class="textarea form-control ng-pristine ng-valid" ng-model="goldReward.description" required></textarea>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class=" col-sm-2 control-label">Upload Banner</label>
                                    <div class="col-sm-6 col-md-4" id="rewardImages">
                                        <div class="fileUpload">
                                            <!--<input type="file" id="files" name="files[]"  class="upload" ng-click="remove()"/>-->
                                            <input type="file" name="fileInput" id="file1" onchange="angular.element(this).scope().fileChanged(event)" />
                                            

                                        </div>
                                        <div class="" id="output">
                                            <p id="filename"></p>
                                            <div class="img-thumbnail">
                                                <img ng-src="{{config.api}}/Pictures/{{image}}" src="{{result}}" class="img-responsive m-l-0 imagethumb" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group MT20">
                                    <div class="col-sm-6 col-md-4 col-sm-offset-2">
                                        <button type="submit" class="btn btn-primary pull-right">{{Text}}</button>
                                        <!--<button type="button" value="Submit" ng-click="update()" class="btn btn-primary pull-right pr20">Update</button>-->
                                    </div>
                                </div>
                        </form>

                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- END PAGE CONTENT-->
</div>
</div>

<div id="loader" ng-show="isbusy">
    <div class="page-spinner-bar" ng-spinner-bar="">
        <div class="bounce1"></div>
        <div class="bounce2"></div>
        <div class="bounce3"></div>
    </div>

</div>
<div id="static" class="modal fade" tabindex="-1" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                <h4 class="modal-title">Message</h4>
            </div>
            <div class="modal-body">
                <p>
                    <!-- Would you like to continue with some arbitrary task?-->
                    {{Message}}
                </p>
            </div>
            <div class="modal-footer">

                <button type="button" ng-click="redirect()" data-dismiss="modal" class="btn green">Ok</button>
            </div>
        </div>
    </div>
</div>
<div id="cropm" class="modal fade" tabindex="-1" data-backdrop="static" data-keyboard="false" >
    <div class="modal-dialog modallarge" >
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                <h4 class="modal-title">Image Cropper</h4>
            </div>
            <div class="modal-body">

                <div>
                    <image-crop
                        data-height="350"
                        data-width="900"
                        data-shape="square"
                        data-step="imageCropStep"
                        src="imgSrc"
                        data-result="result"
                        data-result-blob="resultBlob"
                        crop="initCrop"
                        padding="250"
                        max-size="1024"></image-crop>
                </div>

                <div class="center-block cropbtns">
                    <br />
                    <button type="button" ng-click="clear()">Cancel</button>
                    <button type="button" ng-click="initCrop = true;" id="croop">Crop</button>
                </div>


                <div class="hide">

                    <h2>Result</h2>

                    <p>The data-result-blob property is a Blob object, which is necessary in some upload libraries like <a href="https://github.com/nervgh/angular-file-upload" target="_blank">Angular File Upload</a></p>
                    <p>Image using the data uri:</p>
                    <img id="cropimage" ng-src="{{result}}"></img>
                    <p>The Base64 String used in the image above:</p>
                    <textarea class="result-datauri">{{ result }}</textarea>
                    <button type="button" ng-click="clear()">Clear</button>

                </div>

            </div>
            <div class="modal-footer">

                <!--                <button type="button" ng-click="redirect()" data-dismiss="modal" class="btn green">Ok</button>-->
            </div>
        </div>
    </div>
</div>

<!--<div id="cropm" class="modal fade" tabindex="-1" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                <h4 class="modal-title">crop</h4>
            </div>
            <div class="modal-body">

                <div>
                    <image-crop
                        data-height="150"
                        data-width="300"
                        data-shape="square"
                        data-step="imageCropStep"
                        src="imgSrc"
                        data-result="result"
                        data-result-blob="resultBlob"
                        crop="initCrop"
                        padding="250"
                        max-size="1024"></image-crop>
                </div>

                <div class="center-block cropbtns">
                    <br />
                    <button type="button" ng-click="clear()">Cancel</button>
                    <button type="button" ng-click="initCrop = true;" id="croop">Crop</button>
                </div>


                <div class="hide">

                    <h2>Result</h2>

                    <p>The data-result-blob property is a Blob object, which is necessary in some upload libraries like <a href="https://github.com/nervgh/angular-file-upload" target="_blank">Angular File Upload</a></p>
                    <p>Image using the data uri:</p>
                    <img id="cropimage" ng-src="{{result}}"></img>
                    <p>The Base64 String used in the image above:</p>
                    <textarea class="result-datauri">{{ result }}</textarea>
                    <button type="button" ng-click="clear()">Clear</button>

                </div>

            </div>
            <div class="modal-footer">

              
            </div>
        </div>
    </div>
</div>-->
<script>

    $('#croop').click(function () {

        $('#cropm').modal('hide');


    })
</script>

<script type="text/javascript">
    $(document).ready(function () {


        if (window.File && window.FileList && window.FileReader) {

            $("#files").on("change", function (e) {
                $('.imagethumb').remove();
                //console.log('removed');
                var files = e.target.files,
                filesLength = files.length;
                var f = files[0]
                var fileReader = new FileReader();
                fileReader.onload = (function (e) {
                    var file = e.target;
                    $("<img></img>", {
                        class: "imagethumb",
                        src: e.target.result,
                        title: file.name
                    }).appendTo("#output");
                    $('.imagethumb').attr({ width: 100, height: 100 });

                });
                fileReader.readAsDataURL(f);
                /* for (var i = 0; i < 1 ; i++) {
                  
                 }*/
            });
        } else { alert("Your browser doesn't support to File API") }
    });


</script>
<script>
    function InvalidMsg(textbox) {
        //alert(textbox);
        var t = Number(textbox.value);
        //alert(textbox.value);
        //if (textbox.value == '') {
        //    alert("reqierd");
        //    textbox.setCustomValidity('required field11');
        //}
         if (t < 0) {
            return false;
            textbox.setCustomValidity('please enter only positive numbers');

        }
        //else {
        //    textbox.setCustomValidity('');
        //}
        return true;
    }

</script>
